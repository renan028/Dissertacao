\chapter{Conclusões e trabalhos futuros}\label{conclusao}

A dissertação ``Arquitetura híbrida de um robô móvel guiado por
  trilhos'' foi dividia em três partes principais: revisão bibliográfica,
arquitetura proposta, e resultados.

A revisão bibliográfica, capítulo~\ref{bibliografia}, apresentou os conceitos
básicos (seção~\ref{conceitos}) para o entendimento da dissertação, de acordo
com os principais roboticistas. É realizada uma revisão detalhada e
cronológica dos paradigmas da robótica e suas principais arquiteturas: deliberativa, reativa, e híbrida, comentando
vantagens, desvantagens e mostrando aplicações em robôs pioneiros, de transição
e atuais. A análise das arquiteturas conclui que a arquitetura híbrida de três
camadas é aquela com o maior número de aplicações complexas e bem sucedidas e
que deve ser explorada para o robô de estudo, DORIS. Por fim, a revisão
bibliográfica explora os diferentes ambientes de desenvolvimento de software em robótica (RDEs), apresentando vantagens e
desvantagens dos principais e mais utilizados na literatura. Uma avaliação
competitiva mostrou que ROS e SMACH são ferramentas excelentes para as camadas
Funcional e Executivo, respectivamente, e foram exploradas na solução proposta pelo autor.

A arquitetura proposta, capítulo~\ref{arquipro}, é a aplicação do conhecimento
adquirido e o que foi discutido durante a revisão bibliográfica, tentando aproveitar as vantagens da fusão de arquiteturas
deliberativas e reativas, e contornando suas desvantagens. Na arquitetura
híbrida de três camadas, há variadas formas de implementação das camadas e suas
responsabilidades. O capítulo é dividido na implementação dessas camadas,
destacando e compilando suas responsabilidades. Também são definidos novos
conceitos para garantir modularidade e flexibilidade da solução, como plano de missão, missão
simples, missão complexa, tarefas, e processos reativos.

A camada Planejador é implementada com as responsabilidades controle de missão,
agendador e cartógrafo. A primeira é uma interface usuário-robô que traduz os
comandos e missões do nível superior ao nível Executivo, e exibe o feedback
das missões ao operador. O agendador memoriza o plano de missão dentro do robô,
marca um horário para execução, e possui um algoritmo de recuperação de falhas
para reagendar o plano. O cartógrafo é uma compilação de mapas, gerencia os
modelos do mundo, cria novos modelos para otimizar as tarefas, e os
mantém atualizados com a ajuda da camada Funcional.

A camada Executivo usa SMACH como ferramenta para modelagem de tarefas do robô,
e organiza a implementação nas responsabilidades sequenciador, selecionador,
monitoramento e recuperação de erros, e gerenciamento de recursos, de forma a
garantir modularidade, flexibilidade, facilidade de implementação e desempenho
de execução. Além disso, é desenvolvida uma arquitetura de subsunção, na camada, 
com a ferramenta SMACH e ROS, obtendo assim as vantagens da função de coordenação competitiva
para tarefas conflitantes. As desvantagens da subsunção, como
\textit{situatedness} e escalabilidade, são contornadas a partir de uma
deliberação na camada.

A camada Funcional utiliza ROS como \textit{framework} e comunicação entre
componentes. Os componentes foram desenvolvidos em módulos e na forma
recomendada pelos desenvolvedores de ROS e CLARAty, estado da arte na
implementação Funcional. É um software orientado a objeto, obtendo assim modularidade de
hardware, e estruturação apropriada de software para usar as propriedades de
herança. Nesta camada, ainda é desenvolvido o algoritmo de planejamento de
trajetória e velocidades (\textit{Motion Planning}). 

Ao fim do detalhamento da implementação, o documento segue para os resultados da
arquitetura, onde DORIS é o estudo de caso. Novamente,
dada a modularidade da solução, os testes das camadas podem ser realizados
independentemente e, portanto, o capítulo~\ref{result} foi dividido pelas
camadas. Uma metodologia de testes
foi proposta e as camadas são avaliadas pelos critérios sugeridos por Arkin.

A avaliação de resultados da camada Funcional são testes exaustivos de
componentes com os hardwares do robô. Drivers de sensores, atuadores e
algoritmos são testados, e o robô pode ser teleoperado com joystick ou por
interface web. O repositório ROS e a organização de um software orientado
a objeto aumentam a facilidade de implementação e passam por todos os
critérios de Arkin com excelência.

A avaliação da camada Executivo é a simulação e avaliação das missões simples e
tarefas modeladas, da arquitetura de subsunção implementada, e das desvantagens
contornadas. Todas as responsabilidades da camada foram avaliadas e inseridas
nos critérios de Arkin. Uma missão simples foi decomposta, detalhada e analisada
nesta etapa, utilizando a metodologia proposta. Além disso, a ferramenta SMACH e
o visualizador smach\_viewer foram importantes para a solução, garantindo o
paralelismo e a modularidade. 

Por fim, a camada Planejador foi avaliada perante os critérios de Arkin. A
metodologia imposta na implementação da camada e a organização,
criação e definição de novos conceitos de missões, garantiram modularidade,
paralelismo e flexibilidade da solução. Os testes mostraram o sistema autônomo
integrado e em funcionamento.

Dessa forma, a dissertação é um estudo profundo no tema de arquiteturas
robóticas e a tentativa de compilar ideias, criar novos conceitos e propor uma arquitetura
híbrida mais geral para robôs autônomos na aplicação de inspeção, e que possuem
desafios semelhantes à DORIS, isto é, AUVs e UGVs. A arquitetura se inspira na
natureza, no funcionamento do corpo humano e de outros animais, para criar uma
metodologia intuitiva de implementação e avaliação.

\section{Trabalhos futuros}

Os trabalhos futuros se referem às responsabilidades não finalizadas para cada
camada da arquitetura híbrida proposta, à integração das
camadas no robô, isto é, incluir o sistema autônomo no robô (sair do ambiente
confortável da simulação), à realização de testes em outros sistemas robóticos
(como novos desafios de planejamento de trajetórias), e à formalização
matemática das tarefas.

Na camada Funcional, são necessárias implementações de algoritos SLAM para o
cartógrafo da camada Planejador, a integração dos diversos algoritmos de
detecção de anomalias, o algoritmo de localização, e controle do manipulador.

Na camada Executivo, é necessária a modelagem de missões e tarefas em relação ao
manipulador do robô e outras funcionalidades simples. A camada Executivo já
possui todas as responsabilidades finalizadas e simuladas, de forma que apenas
alguns ajustes e modelagem de novas funcionalidades são necessárias.

Na camada Planejador, é necessário desenvolver a interface gráfica de usuário, e
finalizar as responsabilidades de agendador e cartógrafo. O cartógrafo depende
da camada Funcional e deve ser implementada concomitantemente. O agendador não é
essencial para o sistema autônomo, mas importante para um robô de inspeção e
outras aplicações, logo é necessária para uma arquitetura mais geral.

A implementação de tarefas com a ferramenta SMACH não possui formalismo
matemático, logo não há análise de conflitos, deadlocks e avaliação das
máquinas de estados. As FSMs SMACH não possuem modelagem igual à FSM
padrão, logo a teoria de FSM não pode ser aplicada. Há a necessidade do
desenvolvimento de um modelo matemático, de forma que o sistema não fique
dependente de exaustivas simulações.

Por fim, são necessários testes da arquitetura em outros robôs, a fim de testar
o critério \textit{niche targetability} de Arkin.
